<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Testing</title>
  <link href="output.css" rel="stylesheet">
  <link rel="stylesheet" href="reset.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300&display=swap" rel="stylesheet">

</head>
<body class="bg-colorBg2 font-poppins xs:flex xs:bg-colorBg xs:justify-center">

  <div class="bg-colorBg2 text-colorText w-full h-screen xs:mx-8 xs:shadow-xl xs:w-96 xs:h-screen s:my-24 s:h-auto">

    <div class="p-5 xs:p-10">
      
        <!-- Date -->
        <div class="flex gap-4 font-medium items-center mb-10 flex-col s:gap-0 s:justify-between s:flex-row">
          <div class="flex gap-2 justify-items-start">
            <h1 class="text-5xl xs:text-6xl">12</h1>
            <div class="flex flex-col justify-center">
              <span class="text-sm self-end tracking-sm">JAN</span>
              <span class="text-sm self-center">2013</span>
            </div>
          </div>
          <h1 class="block justify-items-center flex self-center tracking-md text-xl"> TUESDAY </h1>
        </div>

        <div id="parentList">
          <!-- List -->
          <div class="mt-6 flex justify-between items-center">
            <span class="block text-xs font-light tracking-sm text-colorLine NameList"> Simple TodoList</span>
            <img src="img/checklistpng.png" style="width: 20px; height: 20px;" alt="" class="self-center">
          </div>
    
          <div class="mt-6 flex justify-between items-center">
            <span class="block text-xs font-light tracking-sm text-colorLine NameList">Simple TodoList</span>
            <img src="img/checklistpng.png" style="width: 20px; height: 20px;" alt="" class="self-center">
          </div>
    
          <div class="mt-6 flex justify-between items-center">
            <span class="block text-xs tracking-sm font-light NameList"> Simple TodoList</span>
            <img src="img/trashpng.png" style="width: 20px; height: 20px;" alt="" class="self-center trash">
          </div>
          
          <div class="mt-6 flex justify-between items-center">
            <span class="block text-xs tracking-sm font-light NameList"> Simple TodoList</span>
            <img src="img/trashpng.png" style="width: 20px; height: 20px;" alt="" class="self-center trash">
          </div>
        </div>

        <!-- Button -->
        <div class="mt-10 flex justify-center" id="parentButton">
          <input type="text" placeholder="write task here..." id="inputTask" class=" bg-colorBg2 border-b border-colorText absolute mt-3.5 font-light text-xs focus:outline-none outline-none transition-all ease-in-out duration-500 w-0 placeholder:text-gray-400 placeholder:text-xs placeholder:font-thin pl-2 pb-1">
          <button id="addTaskButton" class="bg-colorText px-6 py-3 rounded-3xl text-colorBg2 font-light shadow-xl z-10 transition-all ease-in-out duration-300 focus:outline-none outline-none">Add Task</button>
        </div>

      </div>

    </div>
    
<script>

    let taskButton = document.getElementById('addTaskButton');
    let taskInput = document.getElementById('inputTask');
    let listParent = document.getElementById('parentList');
    const trashList = document.querySelectorAll('.trash');

    /* karena event listeners hanya ditambahkan pada elemen-elemen yang ada saat loop pertama kali dijalankan. Ketika elemen trashList baru ditambahkan setelah itu, event listener tidak secara otomatis ditambahkan ke elemen tersebut. 
    SOLUSI : Delegasi Event: Delegasi event memungkinkan kamu untuk menangani event di elemen induk yang ada sejak awal, yang kemudian menangkap klik pada elemen trashList baru yang ditambahkan. */

    function deleteTask() {
    const trashList = document.querySelectorAll('.trash');
          for(let i = 0; i < trashList.length; i++ ){
              trashList[i].addEventListener('click', function(){
                  trashList[i].setAttribute('src','img/checklistpng.png');
                  trashList[i].previousElementSibling.style.color = '#D3D3D3';
              });
          }
      }

    function returnButtonStyle(){
      taskButton.style.opacity = '0';
      setTimeout(() => {
        taskInput.style.width = '0px';
        taskInput.style.width = '';
      }, 300);
      
      setTimeout(() => {
        taskButton.style.boxShadow = '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)';
      taskButton.textContent = 'Add Task';
      taskButton.style.backgroundColor = '#112D4E';
      taskButton.style.color = '#F9F7F7';
      taskButton.style.position = 'static';
      taskButton.style.left = '0';
      taskButton.style.opacity = '1';
      }, 500);
    }

    function buttonAnimation(){
      taskButton.style.backgroundColor = 'transparent';
      taskButton.style.color = '#112D4E';
      taskButton.textContent = '+';
      taskButton.style.boxShadow = 'none';
      taskButton.style.position = 'relative';
      taskButton.style.left = '100px';
    }

    taskButton.addEventListener('click',function(){
      
      if(taskInput.style.width === '0' || taskInput.style.width === ''){
          taskButton.style.opacity = '0';
          setTimeout(() => {
          taskInput.style.width = '220px';
          }, 100);
          setTimeout(() => {
            buttonAnimation();
          }, 400);
          setTimeout(() => {
            taskButton.style.opacity = '1';
          }, 700);

      } else{
            let newDiv = document.createElement('div');
            let newSpan = document.createElement('span');
            let newImg = document.createElement('img');
              
            /*
            'trim()'
            - Metode trim() menghapus semua spasi putih di awal dan akhir string.
            - Misalnya, jika pengguna memasukkan " hello world " (dengan spasi di awal dan akhir), trim() akan mengubahnya menjadi "hello world".
            
            !== ''
            - !== adalah operator ketidaksamaan yang memeriksa apakah nilai di sebelah kiri tidak sama dengan nilai di sebelah kanan.
            - '' adalah string kosong, jadi !== '' berarti "tidak sama dengan string kosong."
            */
            if(taskInput.value.trim() !== ''){

              newDiv.classList.add('mt-6', 'flex' , 'justify-between', 'items-center');
              newSpan.classList.add('block', 'text-xs', 'tracking-sm', 'font-light', 'NameList');
              newImg.setAttribute('src','img/trashpng.png');
              newImg.setAttribute('style','width: 20px; height: 20px;'); 
              newImg.classList.add('self-center','trash')
              newSpan.textContent = taskInput.value;
              newDiv.appendChild(newSpan);
              newDiv.appendChild(newImg);
              listParent.appendChild(newDiv);
              // taskInput.style.width = '0px';
              // taskInput.style.width = '';
              
              // taskButton.textContent = '+';
              setTimeout(() => {
                returnButtonStyle();
                }, 400);
                taskInput.value = '';
              deleteTask();
            } 
            else{
              alert('kolom masih kosong')
              returnButtonStyle();
            }
      }
    })

</script>
</body>
</html>